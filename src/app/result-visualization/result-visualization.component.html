<div *ngIf="advancedMode" style="margin: 1vw 1vw 0vw 1vw;" (mouseleave) = "selectMenu(-1)">
  <ul class="nav nav-tabs">
    <li class="nav-item dropdown" *ngFor="let menu of menues; let menuIndex = index">
      <a class="nav-link dropdown-toggle {{ ((menuIndex+1) === selectedMenu)? '':'text-primary'}}" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true" style="color:inherit;" (mouseenter) = "selectMenu(menuIndex+1)" (click)="toggleMenu(menuIndex+1)">{{menues[menuIndex].name}}</a>
      <div class="dropdown-menu {{ ((menuIndex+1) === selectedMenu)? 'show':''}}" x-placement="bottom-start" style="position: absolute; transform: translate3d(0px, 42px, 0px); top: 0px; left: 0px; will-change: transform;">
        <a class="dropdown-item" *ngFor="let item of menues[menuIndex].list; let itemIndex = index" (click)="selectAlgorithm(menuIndex,itemIndex)">{{menues[menuIndex].list[itemIndex].name}}</a>
      </div>
    </li>
  </ul>
</div>

<div class="jumbotron">
  <div class="container" style="min-height: 20em;">
    <h3>{{menues[selectedItem.menu].list[selectedItem.item].name}}</h3>
    <div *ngIf="tieWasBroken">
      There are multiple maximal lotteries. Showing the average of the extremal lotteries.
    </div>



    <app-error-box *ngIf="showInvalidMessage" [title] = "errorBlock.title" [msg] = "errorBlock.msg" (close)="closeInvalidMessage()"></app-error-box>

    <div class="progress" *ngIf="waiting">
      <br/>
      <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%;"></div>
    </div>

    <div [ngSwitch]="resultType" *ngIf="!waiting">
      <app-bar-chart *ngSwitchCase="resultDataType.Lotteries" [data] = "resultBarData" [lotteries]="resultLotteries"></app-bar-chart>
      <div *ngSwitchCase="resultDataType.Profile" class="card card-block bg-primary" style="width: 13rem; margin-right:5px; display:inline-block">
        <div class="card-header text-white d-flex w-100">
          Group Profile
        </div>
        <ul class="list-group list-group-flush">
            <li class="list-group-item"
                style="text-align:center"
                *ngFor="let item of resultProfile">{{ model.getIdentifier(item) }}</li>
        </ul>

      </div>
    </div>

    <div *ngIf="menues[selectedItem.menu].list[selectedItem.item].hasParameter" style="margin-bottom:1em;">
      <h4><button (click)="toggleMLSettingsVisibility()" style="font-size:16px ;background:none; border:none; color: #2fa4e7" class="toggleButton">{{visible? "&#9660;":"&#9658;"}}</button>
        <a (click)="toggleMLSettingsVisibility()">Settings</a></h4>
    <div [hidden] = "!visibleSettings">
      <strong style="display:block">{{menues[selectedItem.menu].list[selectedItem.item].paraName}}: {{voteParameter}}</strong>
    <span style="">
        {{menues[selectedItem.menu].list[selectedItem.item].paraMin}}
        <input type = "range"
               min="{{menues[selectedItem.menu].list[selectedItem.item].paraMin}}"
               max="{{menues[selectedItem.menu].list[selectedItem.item].paraMax}}"
               name="voteParameter"
               [(ngModel)]="voteParameter"
               (change) = "updateVisualization()"
               step="1"/>
        {{menues[selectedItem.menu].list[selectedItem.item].paraMax}} <br/>
      </span>
    </div>
  </div>
  </div>
</div>

<div style="margin: 2vw 1vw 1vw 2vw;" *ngIf="advancedMode">
  <h3><button (click)="toggleSCFVisibility()" style="font-size:16px ;background:none; border:none; color: #2fa4e7" class="toggleButton">{{visible? "&#9660;":"&#9658;"}}</button>
    <a (click)="toggleSCFVisibility()">Comparison to other rules</a></h3>
  <div class="center-div" [hidden] = "!visibleSCF">
    <table>
      <tr>
        <td>

          <table style="width:200px;">
            <tr>
              <th>SCF</th>
              <th style="text-align:center">Result</th>
            </tr>
            <tr *ngFor="let item of [1,2,3,4,5]; let itemIndex = index">
              <td>{{socialChoiceFunctions[itemIndex]}}</td>
              <td style="text-align:center">{{socialChoiceResults[itemIndex]}}</td>
            </tr>
          </table>

        </td>
        <td style="width:100px"></td>
        <td>

          <table style="width:200px; vertical-align: top;">
            <tr>
              <th>SCF</th>
              <th style="text-align:center">Result</th>
            </tr>
            <tr *ngFor="let item of [6]; let itemIndex = index">
              <td>{{socialChoiceFunctions[itemIndex+5]}}</td>
              <td style="text-align:center">{{socialChoiceResults[itemIndex+5]}}</td>
            </tr>
          </table>

        </td>
      </tr>
    </table>


  </div>
</div>

<div style="margin: 2vw 1vw 1vw 2vw;">
  <app-efficiency-chart *ngIf="(resultType == resultDataType.Lotteries) && advancedMode && !waiting" [data]="efficencyData"></app-efficiency-chart>
</div>

